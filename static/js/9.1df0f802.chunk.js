(this["webpackJsonpsocial-connections"]=this["webpackJsonpsocial-connections"]||[]).push([[9],{1670:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var c=n(48),i=n(84),r=n(0),o=n(7),a=n(36),d=n(1677),s=n(1666),l=n(1679),u=n(1678),j=n(86),f=n(1703),b=n(133),p=n(2);function h(){var e=Object(o.i)().relation,t=Object(f.a)(),n=t.connections,a=t.relations,h=Object(r.useState)({}),m=Object(i.a)(h,2),g=m[0],I=m[1],v=Object(r.useState)({}),N=Object(i.a)(v,2),w=N[0],A=N[1],P=Object(r.useState)({idsArr:[],done:!1}),y=Object(i.a)(P,2),k=y[0],E=y[1],F=Object(o.g)();return Object(r.useEffect)((function(){var t=e.includes("-")?Number(e.split("-")[0]):-1,i=e.includes("-")?Number(e.split("-")[1]):-1,r=n.find((function(e){return e.id===t})),o=n.find((function(e){return e.id===i}));r&&o?(I(r),A(o),E(function e(t,n,i){var r=[t],o=[];return i.forEach((function(a){if((a.peopleId===t||a.connectedPeopleId===t)&&t!==n)if(a.connectedPeopleId===n||a.peopleId===n)r.push(n),r.length>1&&o.push([].concat(r)),r.splice(1,r.length-1);else{var d=e(a.peopleId===t?a.connectedPeopleId:a.peopleId,n,i.filter((function(e){return!(e.peopleId===t||e.connectedPeopleId===t)})));d.idsArr.length>0&&d.idsArr.forEach((function(e){o.some((function(t){return[].concat(r,Object(c.a)(e)).length===t.length&&t.every((function(t){return[].concat(r,Object(c.a)(e)).includes(t)}))}))||o.push([].concat(r,Object(c.a)(e)))}))}})),{idsArr:o,done:!0}}(r.id,o.id,a))):(j.b.warning("Unable to find person"),F.push("/relationship"))}),[e]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(d.a,{attached:"top",children:Object(p.jsxs)(d.a.Item,{header:!0,children:[g.firstName,"\xa0 ",Object(p.jsx)(s.a,{name:"linkify"})," ",w.firstName]})}),Object(p.jsx)(l.a,{attached:"bottom",children:Object(p.jsx)(b.d,{children:k.done?k.idsArr.length>0?k.idsArr.map((function(e){return Object(p.jsx)(b.b,{children:e.map((function(t,n){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(O,{id:t}),e.length-1!==n&&Object(p.jsx)(x,{id:t,refId:e[n+1]})]})}))})})):Object(p.jsx)(u.a,{info:!0,children:"No Relations found"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(s.a,{name:"circle notched",size:"large",color:"blue",loading:!0})," ","Loading"]})})})]})}function O(e){var t=Object(f.a)().connections.find((function(t){return t.id===e.id}));return t?Object(p.jsx)(b.c,{style:{minWidth:10*"".concat(t.firstName," ").concat(t.lastName).length+44+"px",maxWidth:10*"".concat(t.firstName," ").concat(t.lastName).length+44+"px"},children:Object(p.jsxs)(a.b,{to:"/add/".concat(t.id),children:[Object(p.jsx)(s.a,{name:"user",size:"large",circular:!0}),"".concat(t.firstName," ").concat(t.lastName)]})}):Object(p.jsx)(p.Fragment,{children:"Couldn't find the person"})}function x(e){var t=Object(f.a)(),n=t.relations,c=t.relationTypes,o=Object(r.useState)({content:"Calculating...",width:"100px"}),a=Object(i.a)(o,2),d=a[0],s=a[1];return Object(r.useEffect)((function(){var t=n.find((function(t){return t.peopleId===e.id&&t.connectedPeopleId===e.refId||t.connectedPeopleId===e.id&&t.peopleId===e.refId})),i=c.find((function(e){return e.value===(null===t||void 0===t?void 0:t.relationType)}));s({content:(null===i||void 0===i?void 0:i.text)||"Unknown",width:i?"".concat(15*(null===i||void 0===i?void 0:i.text.length),"px"):"100px"})}),[n,c,e.id,e.refId]),Object(p.jsx)(b.e,{width:d.width,children:Object(p.jsx)("span",{children:d.content})})}},1703:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(0),i=n(87);function r(){return Object(c.useContext)(i.a)}}}]);
//# sourceMappingURL=9.1df0f802.chunk.js.map